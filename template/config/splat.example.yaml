# =============================================================================
# Splat Configuration Example
# =============================================================================
# This is a template splat configuration for a PSX game.
# Copy this file to splat.<version>.yaml and customize for your game.
#
# Documentation: https://github.com/ethteck/splat/wiki
# =============================================================================

options:
  # -------------------------------------------------------------------------
  # Platform and naming
  # -------------------------------------------------------------------------
  platform: psx                     # PlayStation 1
  basename: game                    # Base name for output files
  
  # -------------------------------------------------------------------------
  # Paths (relative to this config file's parent directory)
  # -------------------------------------------------------------------------
  base_path: ..                     # Project root
  build_path: build/us              # Build output directory
  target_path: disks/us/SLUS_000.00 # Path to original binary
  asm_path: asm/us                  # Disassembled ASM output
  asset_path: assets                # Extracted assets
  src_path: src                     # C source files
  ld_script_path: build/us/game.ld  # Generated linker script
  
  # -------------------------------------------------------------------------
  # Compiler settings
  # -------------------------------------------------------------------------
  # GCC: For games compiled with PSY-Q GCC 2.6/2.7/2.8
  # SN64: For games using SN Systems compiler
  compiler: GCC
  
  # -------------------------------------------------------------------------
  # Symbol files
  # -------------------------------------------------------------------------
  symbol_addrs_path:
    - config/symbols.us.txt         # User-defined symbols

  # Auto-generated undefined symbol files
  undefined_funcs_auto_path: build/us/undefined_funcs_auto.txt
  undefined_syms_auto_path: build/us/undefined_syms_auto.txt
  
  # -------------------------------------------------------------------------
  # Disassembly options
  # -------------------------------------------------------------------------
  find_file_boundaries: yes         # Try to detect file boundaries
  use_legacy_include_asm: no        # Use new INCLUDE_ASM macro format
  disassemble_all: true             # Disassemble all code sections
  
  # asm_jtbl_label_macro: jlabel    # Jump table label macro (optional)
  
  # -------------------------------------------------------------------------
  # Section ordering (must match original binary)
  # -------------------------------------------------------------------------
  # PSX binaries typically have: .text, .data, .rodata, .bss
  # Some games have different orderings - check your binary!
  section_order:
    - ".text"
    - ".data"
    - ".rodata"
    - ".bss"
  
  # -------------------------------------------------------------------------
  # Custom extensions (optional)
  # -------------------------------------------------------------------------
  # extensions_path: tools/splat_ext

# =============================================================================
# SHA1 checksum of the target binary
# =============================================================================
# Generate with: sha1sum disks/us/SLUS_000.00
sha1: 0000000000000000000000000000000000000000

# =============================================================================
# Segment definitions
# =============================================================================
# This is where you define how to split the binary.
# Start with a basic split and refine as you understand the binary structure.
#
# Segment types:
#   code   - Executable code with subsegments (c, asm, data, rodata, bss)
#   data   - Raw data
#   rodata - Read-only data
#   bss    - Uninitialized data
#   bin    - Raw binary blob
#
# Subsegment types for code segments:
#   c      - C source file (to be decompiled)
#   asm    - Assembly file (from disassembly)
#   data   - Data section
#   rodata - Read-only data section
#   bss    - BSS section
# =============================================================================

segments:
  # ---------------------------------------------------------------------------
  # PSX executable header (required)
  # ---------------------------------------------------------------------------
  # PSX executables start with an 0x800 byte header
  - name: header
    type: header
    start: 0x00000000

  # ---------------------------------------------------------------------------
  # Main code segment
  # ---------------------------------------------------------------------------
  - name: main
    type: code
    start: 0x00000800                # After PSX header
    vram: 0x80010000                 # PSX RAM starts at 0x80000000
                                     # Typical load address is 0x80010000
    align: 4
    subalign: 4
    subsegments:
      # Initial extraction - start with all asm, convert to c as you decompile
      # Format: [offset, type, name]
      
      # Example: All code as assembly initially
      - [0x800, asm, main]
      
      # Example: Once you identify functions, split into smaller segments
      # - [0x800, c, init]          # Decompiled C file
      # - [0x1200, asm, unknown_1]  # Not yet decompiled
      # - [0x2000, c, game_loop]    # Decompiled C file
      
      # Data sections
      - [0x10000, data, main_data]      # .data section
      - [0x12000, rodata, main_rodata]  # .rodata section
      - [0x14000, bss, main_bss]        # .bss section

  # ---------------------------------------------------------------------------
  # End marker (required)
  # ---------------------------------------------------------------------------
  - [0x20000]  # End of file - adjust to your binary's size
